# –ë—é–¥–∂–µ—Ç-—Ç—Ä–µ–∫–µ—Ä - Telegram Mini App

Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –∫–∞–∫ Telegram Mini App.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üì± Mini App (Web)
- –°–æ–∑–¥–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 14 –¥–Ω–µ–π)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
  - –ü–ª–∞–Ω–æ–≤—ã–π –¥–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç (–æ–±—â–∏–π –±—é–¥–∂–µ—Ç / –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π)
  - –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç (–æ—Å—Ç–∞—Ç–æ–∫ / –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –¥–Ω–∏)
  - –ë–∞–ª–∞–Ω—Å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
  - –û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –∏ –¥–æ—Ö–æ–¥—ã –∑–∞ –ø–µ—Ä–∏–æ–¥
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–µ
- –ü—Ä–æ–≥–Ω–æ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞

### ü§ñ Telegram Bot –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –∏ –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `/budget <—Å—É–º–º–∞> [–¥–Ω–∏]` - –°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç (–ø—Ä–∏–º–µ—Ä: `/budget 50000 14`)
- `/status` - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –±—é–¥–∂–µ—Ç–∞
- `/expense <—Å—É–º–º–∞> [–æ–ø–∏—Å–∞–Ω–∏–µ]` –∏–ª–∏ `/e` - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥
- `/income <—Å—É–º–º–∞> [–æ–ø–∏—Å–∞–Ω–∏–µ]` –∏–ª–∏ `/i` - –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥
- `/transactions` - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `/delete` - –£–¥–∞–ª–∏—Ç—å –±—é–¥–∂–µ—Ç
- `/undo` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

### ‚ö° –ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–∏—Å–ª–æ –≤ —á–∞—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞:
- `500` –∏–ª–∏ `-500` - —Ä–∞—Å—Ö–æ–¥ 500 —Ä—É–±
- `500 –æ–±–µ–¥` - —Ä–∞—Å—Ö–æ–¥ 500 —Ä—É–± —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º "–æ–±–µ–¥"

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É:
```bash
cd nextjs-app
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```bash
cp .env.example .env
```

4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:
```env
BOT_TOKEN=your_telegram_bot_token
WEBAPP_URL=https://your-domain.com
```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run dev
```

### Docker

1. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
docker-compose up -d --build
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Menu Button:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots` –≤ BotFather
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - Bot Settings ‚Üí Menu Button
   - –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

4. –î–ª—è production —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook:
   - –î–æ–±–∞–≤—å—Ç–µ `WEBHOOK_URL=https://your-domain.com` –≤ `.env`
   - Webhook –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `/api/telegram`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nextjs-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ budget/route.ts    # API –±—é–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transaction/route.ts # API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/route.ts    # SSE —Å–æ–±—ã—Ç–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram/route.ts  # Webhook Telegram
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx            # Layout
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css           # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ components/               # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage.ts           # –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculations.ts      # –†–∞—Å—á–µ—Ç—ã –±—é–¥–∂–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts          # Telegram bot
‚îÇ   ‚îî‚îÄ‚îÄ types/                   # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ package.json
```

## API Endpoints

### GET /api/budget
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±—é–¥–∂–µ—Ç –∏ —Ä–∞—Å—á–µ—Ç—ã

### POST /api/budget
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±—é–¥–∂–µ—Ç
```json
{
  "amount": 50000,
  "period": 14
}
```

### DELETE /api/budget
–£–¥–∞–ª–∏—Ç—å –±—é–¥–∂–µ—Ç

### POST /api/transaction
–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
```json
{
  "amount": -500,
  "description": "–û–±–µ–¥",
  "userId": 123456,
  "userName": "–ò–≤–∞–Ω"
}
```

### GET /api/events
SSE endpoint –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### POST /api/telegram
Webhook –¥–ª—è Telegram Bot

## –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–æ–≤

- **–ü–ª–∞–Ω–æ–≤—ã–π –¥–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç** = –û–±—â–∏–π –±—é–¥–∂–µ—Ç / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç** = (–û–±—â–∏–π –±—é–¥–∂–µ—Ç + –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏) / –û—Å—Ç–∞–≤—à–∏–µ—Å—è –¥–Ω–∏
- **–ë–∞–ª–∞–Ω—Å —Å–µ–≥–æ–¥–Ω—è** = –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –¥–Ω–µ–≤–Ω–æ–π - –†–∞—Å—Ö–æ–¥—ã —Å–µ–≥–æ–¥–Ω—è + –î–æ—Ö–æ–¥—ã —Å–µ–≥–æ–¥–Ω—è
- **–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ** = –¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫ - –ü–ª–∞–Ω–æ–≤—ã–π –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
